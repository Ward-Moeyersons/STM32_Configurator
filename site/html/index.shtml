<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <title>STM32 GPIO Control</title>
</head>
<body>

    <h1>STM32 GPIO Control</h1>

    <div class="container">
        <div class="card">
            <h2>Pin Configuration</h2>
            <form action="/io.cgi" method="get">
                <table class="gpio-table">
                    <thead>
                        <tr>
                            <th>Pin</th>
                            <th>Enable</th>
                            <th>Label</th>
                            <th>Mode</th>
                            <th>Initial State</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>D0</td>
                            <td><input type="checkbox" id="enableBoxD0" class="enable-box"></td>
                            <td><input type="text" name="D0label"></td>
                            <td><select name="D0mode" id="modeD0">
                                <option value="input">Input</option>
                                <option value="output">Output</option>
                            </select></td>
                            <td><input type="checkbox" name="D0state" value="0" id="stateD0"></td>
                        </tr>
                        <tr>
                            <td>D1</td>
                            <td><input type="checkbox" name="D1" class="enable-box"></td>
                            <td><input type="text" name="D1label"></td>
                            <td><select name="D1mode">
                                <option value="input">Input</option>
                                <option value="output">Output</option>
                            </select></td>
                            <td><input type="checkbox" name="D1state" value="0" id="stateD1"></td>
                        </tr>
                        <tr>
                            <td>D2</td>
                            <td><input type="checkbox" name="D2" class="enable-box"></td>
                            <td><input type="text" name="D2label"></td>
                            <td><select name="D2mode">
                                <option value="input">Input</option>
                                <option value="output">Output</option>
                            </select></td>
                            <td><input type="checkbox" name="D2state" value="0" id="stateD2"></td>
                        </tr>   
                        <tr>
                            <td>D3</td>
                            <td><input type="checkbox" name="D3" class="enable-box"></td>
                            <td><input type="text" name="D3label"></td>
                            <td><select name="D3mode">
                                <option value="input">Input</option>
                                <option value="output">Output</option>
                            </select></td>
                            <td><input type="checkbox" name="D3state" value="0" id="stateD3"></td>
                        </tr>
                        <tr>
                            <td>D4</td>
                            <td><input type="checkbox" name="D4" class="enable-box"></td>
                            <td><input type="text" name="D4label"></td>
                            <td><select name="D4mode">
                                <option value="input">Input</option>
                                <option value="output">Output</option>
                            </select></td>
                            <td><input type="checkbox" name="D4state" value="0" id="stateD4"></td>
                        </tr>
                        <tr>
                            <td>D5</td>
                            <td><input type="checkbox" name="D5" class="enable-box"></td>
                            <td><input type="text" name="D5label"></td>
                            <td><select name="D5mode">
                                <option value="input">Input</option>
                                <option value="output">Output</option>
                            </select></td>
                            <td><input type="checkbox" name="D5state" value="0" id="stateD5"></td>
                        </tr>
                        <tr>    
                            <td>D6</td>
                            <td><input type="checkbox" name="D6" class="enable-box"></td>
                            <td><input type="text" name="D6label"></td>
                            <td><select name="D6mode">
                                <option value="input">Input</option>
                                <option value="output">Output</option>
                            </select></td>
                            <td><input type="checkbox" name="D6state" value="0" id="stateD6"></td>
                        </tr>
                        <tr>
                            <td>D7</td>
                            <td><input type="checkbox" name="D7" class="enable-box"></td>
                            <td><input type="text" name="D7label"></td>
                            <td><select name="D7mode">
                                <option value="input">Input</option>
                                <option value="output">Output</option>
                            </select></td>
                            <td><input type="checkbox" name="D7state" value="0" id="stateD7"></td>
                        </tr>
                        <tr>
                            <td>D8</td>
                            <td><input type="checkbox" name="D8" class="enable-box"></td>
                            <td><input type="text" name="D8label"></td>
                            <td><select name="D8mode">
                                <option value="input">Input</option>
                                <option value="output">Output</option>
                            </select></td>
                            <td><input type="checkbox" name="D8state" value="0" id="stateD8"></td>
                        </tr>
                        <tr>
                            <td>D9</td>
                            <td><input type="checkbox" name="D9" class="enable-box"></td>
                            <td><input type="text" name="D9label"></td>
                            <td><select name="D9mode">
                                <option value="input">Input</option>
                                <option value="output">Output</option>
                            </select></td>
                            <td><input type="checkbox" name="D9state" value="0" id="stateD9"></td>
                        </tr>
                        <tr>
                            <td>D10</td>
                            <td><input type="checkbox" name="D10" class="enable-box"></td>
                            <td><input type="text" name="D10label"></td>
                            <td><select name="D10mode">
                                <option value="input">Input</option>
                                <option value="output">Output</option>
                            </select></td>
                            <td><input type="checkbox" name="D10state" value="0" id="stateD10"></td>
                        </tr>
                        <tr>
                            <td>D11</td>
                            <td><input type="checkbox" name="D11" class="enable-box"></td>
                            <td><input type="text" name="D11label"></td>
                            <td><select name="D11mode">
                                <option value="input">Input</option>
                                <option value="output">Output</option>
                            </select></td>
                            <td><input type="checkbox" name="D11state" value="0" id="stateD11"></td>
                        </tr>
                        <tr>
                            <td>D12</td>
                            <td><input type="checkbox" name="D12" class="enable-box"></td>
                            <td><input type="text" name="D12label"></td>
                            <td><select name="D12mode">
                                <option value="input">Input</option>
                                <option value="output">Output</option>
                            </select></td>
                            <td><input type="checkbox" name="D12state" value="0" id="stateD12"></td>
                        </tr>
                        <tr>    
                            <td>D13</td>
                            <td><input type="checkbox" name="D13" class="enable-box"></td>
                            <td><input type="text" name="D13label"></td>
                            <td><select name="D13mode">
                                <option value="input">Input</option>
                                <option value="output">Output</option>
                            </select></td>
                            <td><input type="checkbox" name="D13state" value="0" id="stateD13"></td>
                        </tr>
                        <tr>
                            <td>D14</td>
                            <td><input type="checkbox" name="D14" class="enable-box"></td>
                            <td><input type="text" name="D14label"></td>
                            <td><select name="D14mode">
                                <option value="input">Input</option>
                                <option value="output">Output</option>
                            </select></td>
                            <td><input type="checkbox" name="D14state" value="0" id="stateD14"></td>
                        </tr>
                        <tr>
                            <td>D15</td>
                            <td><input type="checkbox" name="D15" class="enable-box"></td>
                            <td><input type="text" name="D15label"></td>
                            <td><select name="D15mode">
                                <option value="input">Input</option>
                                <option value="output">Output</option>
                            </select></td>
                            <td><input type="checkbox" name="D15state" value="0" id="stateD15"></td>
                        </tr>
                    </tbody>
                </table>
                <div class="controls">
                    <button type="submit">Set Outputs</button>
                </div>
            </form>
        </div>
    </div>

</body>
<script>
  document.querySelectorAll(".enable-box").forEach(enableBox => {
    const row = enableBox.closest("tr");
    const controls = row.querySelectorAll("input:not(.enable-box), select");

    // start disabled
    controls.forEach(el => el.disabled = !enableBox.checked);

    enableBox.addEventListener("change", () => {
      controls.forEach(el => {
        el.disabled = !enableBox.checked;
      });
    });
  });
</script>
</html>
